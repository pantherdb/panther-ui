<div class="w-100-p h-100-p">
  <form fxLayout="column" fxLayoutAlign="start stretch" name="geneForm" [formGroup]="geneForm" class="pthr-gene-form">
    <div class="pthr-form-section" fxLayout="column" fxLayoutAlign="start stretch">
      <div class="pthr-section-header" fxLayout="row" fxLayoutAlign="start center">
        <div class="pthr-section-heading">
          Organism
        </div>
      </div>
      <div class="pthr-section-body" fxLayout="column" fxLayoutAlign="start stretch">
        <mat-form-field class="" appearance="outline">
          <mat-label>Organisms</mat-label>
          <input matInput formControlName="organism" placeholder="Swelect an organism" [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let organism of filteredOrganisms | async" [value]="organism.name">
              <span>{{organism.long_name}}</span>
              <span fxFlex=""></span>
              <span>{{organism.taxon_id}}</span>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
    </div>
    <div class="pthr-form-section" fxLayout="column" fxLayoutAlign="start stretch">
      <div class="pthr-section-header" fxLayout="row" fxLayoutAlign="start center">
        <div class="pthr-section-heading">
          Analysis
        </div>
      </div>
      <div class="pthr-section-body" fxLayout="column" fxLayoutAlign="start stretch">
        <mat-radio-group formControlName="analysis" fxLayout="column" fxLayoutAlign="start stretch">
          <mat-radio-button *ngFor="let analysisType of pantherTypes.analysisTypes" class="mt-8 mb-4" value="{{analysisType.id}}"
            fxFlex="100">
            {{analysisType.label}}</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div class="pthr-form-section" fxLayout="column" fxLayoutAlign="start stretch">
      <div class="pthr-section-header" fxLayout="row" fxLayoutAlign="start center">
        <div class="pthr-section-heading">
          List Upload <strong> {{selectedAnalysis ==='overrep'? 'Overrep':'Functional Classification'}}</strong>
        </div>
      </div>
      <div formGroupName="list" class="pthr-section-body w-100-p" fxLayout="row" fxLayoutAlign="start">
        <div formArrayName="analysis" fxLayout="column" fxLayoutAlign="start stretch">
          <h2>
            Analysis List
          </h2>
          <div [formGroupName]="i" *ngFor="let ids of geneForm.controls.list.controls.analysis.controls; let i=index">
            <mat-form-field class="mr-8 w-100-p" appearance="outline">
              <mat-label>IDs</mat-label>
              <textarea matInput formControlName="ids" placeholder="Enter IDs"></textarea>
            </mat-form-field>
            <input type="file" formControlName="browse" />
          </div>
          <button *ngIf="selectedAnalysis ==='overrep'" (click)='addOverrepList()' type="button" mat-raised-button
            color="" class="mr-8">
            Add
          </button>
        </div>
        <div formArrayName="reference">
          <h2>
            Reference List
          </h2>
          <div [formGroupName]="i" *ngFor="let ids of geneForm.controls.list.controls.reference.controls; let i=index">
            <mat-form-field class="mr-8 w-100-p" appearance="outline">
              <mat-label>IDs</mat-label>
              <textarea matInput formControlName="ids" placeholder="Enter IDs"></textarea>
            </mat-form-field>
            <input type="file" formControlName="browse" />
          </div>
        </div>
      </div>
    </div>
    <div class="pthr-form-section" fxLayout="column" fxLayoutAlign="start stretch">
      <div class="pthr-section-header" fxLayout="row" fxLayoutAlign="start center">
        <div class="pthr-section-heading">
          Analysis Options
        </div>
      </div>
      <div class="pthr-section-body" fxLayout="column" fxLayoutAlign="start stretch">
        <div>
          Data Columns
        </div>
        <div *ngFor="let dataColumn of  geneForm.controls.dataColumns.controls; let i=index">
          <mat-checkbox [formControl]="dataColumn" class="mt-8 mb-4"> {{pantherTypes.dataColumns[i].label}}</mat-checkbox>
        </div>
      </div>
      <div class="pthr-section-body" fxLayout="column" fxLayoutAlign="start stretch">
        <div>
          Test
        </div>
        <mat-radio-group formControlName="analysis" fxLayout="column" fxLayoutAlign="start stretch">
          <mat-radio-button *ngFor="let analysisTest of pantherTypes.analysisTests" class="mt-8 mb-4" value="{{analysisTest.id}}"
            fxFlex="100">
            {{analysisTest.label}}</mat-radio-button>
        </mat-radio-group>
      </div>
      <div class="pthr-section-body" fxLayout="column" fxLayoutAlign="start stretch">
        <div>
          Correction
        </div>
        <mat-radio-group formControlName="analysis" fxLayout="column" fxLayoutAlign="start stretch">
          <mat-radio-button *ngFor="let analysisCorrection of pantherTypes.analysisCorrections" class="mt-8 mb-4" value="{{analysisCorrection.id}}"
            fxFlex="100">
            {{analysisCorrection.label}}</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div layout="row" class="pthr-submit-row">
      <span fxFlex></span>
      <button (click)='cancel()' type="button" mat-raised-button color="" class="mr-8">Clear</button>
      <button (click)="search()" type="button" mat-raised-button color="primary">Save</button>
    </div>
  </form>
</div>
